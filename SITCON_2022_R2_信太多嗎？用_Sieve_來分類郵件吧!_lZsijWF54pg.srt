1
00:00:30,000 --> 00:00:37,000
看起來應該大多數人都是用 Gmail 來細進收信

2
00:00:37,000 --> 00:00:40,000
大家應該覺得很合理就是 Gmail 打開

3
00:00:40,000 --> 00:00:42,000
然後就會看到一大堆信跑出來

4
00:00:42,000 --> 00:00:43,000
然後就別人寄給你的

5
00:00:43,000 --> 00:00:44,000
然後你按一下寄信

6
00:00:44,000 --> 00:00:46,000
然後信就會跑到別人那邊去

7
00:00:46,000 --> 00:00:48,000
看起來一切都非常的合理正常

8
00:00:48,000 --> 00:00:53,000
但其實它的背後有一套蠻複雜的系統在運作著

9
00:00:53,000 --> 00:00:56,000
有一派人像是我

10
00:00:56,000 --> 00:00:59,000
我們會選擇自己去建一個郵件伺服器來用

11
00:00:59,000 --> 00:01:01,000
我們就不用用 Gmail

12
00:01:01,000 --> 00:01:04,000
我們就不需要把我們資料經過 Google 的這種感覺

13
00:01:04,000 --> 00:01:07,000
我們自己建郵件伺服器的時候

14
00:01:07,000 --> 00:01:11,000
我們用的郵件系統的邏輯其實跟 Gmail 是一樣的東西

15
00:01:11,000 --> 00:01:13,000
所以當然是可以互通的

16
00:01:13,000 --> 00:01:16,000
所以我們在一開始我們要先來講講

17
00:01:16,000 --> 00:01:19,000
這個郵件系統它是怎麼運作的

18
00:01:19,000 --> 00:01:25,000
如果我們用一般的平常送信來做比喻的話

19
00:01:25,000 --> 00:01:27,000
我們可以看一下這張圖

20
00:01:27,000 --> 00:01:31,000
我們可以把左下角的這個人想成我們自己

21
00:01:31,000 --> 00:01:34,000
然後這個可能是我們平常某個朋友

22
00:01:34,000 --> 00:01:36,000
可能會平常用電子郵件聯絡的朋友

23
00:01:36,000 --> 00:01:39,000
雖然現在正常人應該不會用電子郵件來聯絡

24
00:01:39,000 --> 00:01:41,000
但就比喻

25
00:01:41,000 --> 00:01:44,000
那我們郵件系統裡面主要有三個角色

26
00:01:44,000 --> 00:01:48,000
就是上一頁講的 MTA MDA 跟 MUA

27
00:01:48,000 --> 00:01:52,000
我們可以先看一下這個 MTA

28
00:01:52,000 --> 00:01:53,000
這是在我們這一側

29
00:01:53,000 --> 00:01:54,000
從中間這邊切一半

30
00:01:54,000 --> 00:01:56,000
這個 MTA 是在我們這一側的

31
00:01:56,000 --> 00:02:00,000
這個 MTA 在收到屬於我們

32
00:02:00,000 --> 00:02:03,000
就是應該說收件地址是我們的信的時候

33
00:02:03,000 --> 00:02:06,000
這個郵差他會把信送給我們的大樓管理員

34
00:02:06,000 --> 00:02:07,000
可能住在一個大樓裡面

35
00:02:07,000 --> 00:02:08,000
這是比喻

36
00:02:08,000 --> 00:02:11,000
所以如果你家住別墅或者是什麼獨棟之類的東西

37
00:02:11,000 --> 00:02:12,000
那就沒關係

38
00:02:12,000 --> 00:02:13,000
這只是一個比喻

39
00:02:13,000 --> 00:02:15,000
可能是一個公寓大樓裡面

40
00:02:15,000 --> 00:02:18,000
所以郵差會把信送到公寓的管理員他手上

41
00:02:18,000 --> 00:02:23,000
然後管理員他會在可能走過你家前面的街道

42
00:02:23,000 --> 00:02:26,000
然後把這封信丟進到你的信箱裡面

43
00:02:26,000 --> 00:02:29,000
然後接下來你可能就可以從你家

44
00:02:29,000 --> 00:02:32,000
然後下樓下到一樓從信箱裡面把信拿出來

45
00:02:32,000 --> 00:02:33,000
然後看一下

46
00:02:33,000 --> 00:02:34,000
然後你可能覺得

47
00:02:34,000 --> 00:02:36,000
喔好那我要回這封信

48
00:02:36,000 --> 00:02:38,000
那我這個 MUA 比較特別的地方是

49
00:02:38,000 --> 00:02:41,000
它其實它是信箱但同時也是郵筒

50
00:02:41,000 --> 00:02:43,000
所以我可以就直接把一封回信

51
00:02:43,000 --> 00:02:45,000
然後就丟進這個郵筒裡面

52
00:02:45,000 --> 00:02:47,000
就是剛剛收信的這個信箱裡面

53
00:02:47,000 --> 00:02:49,000
然後這封信就會在

54
00:02:49,000 --> 00:02:53,000
這個郵筒就會讓郵差來把信給寄出去

55
00:02:53,000 --> 00:02:56,000
那到別人家就是右半部這一塊的時候

56
00:02:56,000 --> 00:02:58,000
也是一樣的道理

57
00:02:58,000 --> 00:03:01,000
你的郵差會把信送給別人的郵差

58
00:03:01,000 --> 00:03:04,000
然後別人的郵差會再幫你把信丟給管理員

59
00:03:04,000 --> 00:03:09,000
那管理員就會再做一樣的事情這樣子

60
00:03:09,000 --> 00:03:12,000
但這個圖基本上是一個簡略的概念

61
00:03:12,000 --> 00:03:14,000
就是它並不完全

62
00:03:14,000 --> 00:03:16,000
所以第一個是郵件系統

63
00:03:16,000 --> 00:03:18,000
你可以把它用三個角色

64
00:03:18,000 --> 00:03:21,000
MTA、MDA、MUA 來做解釋

65
00:03:21,000 --> 00:03:23,000
但其實你也可以用比較細分的五個角色

66
00:03:23,000 --> 00:03:25,000
這就是看你的需求

67
00:03:25,000 --> 00:03:27,000
以今天來說

68
00:03:27,000 --> 00:03:29,000
我選擇只用三個角色的圖來解釋就好

69
00:03:29,000 --> 00:03:35,000
不然會太過於複雜

70
00:03:35,000 --> 00:03:37,000
我們剛剛大概清楚了

71
00:03:37,000 --> 00:03:39,000
我們郵件的系統是怎麼運作的

72
00:03:39,000 --> 00:03:43,000
接下來我要來講一下我們使用的軟體

73
00:03:43,000 --> 00:03:45,000
第一個 MTA 也就是郵差的角色

74
00:03:45,000 --> 00:03:47,000
我們使用的是 Postfix 這個軟體

75
00:03:47,000 --> 00:03:49,000
下面的這張圖

76
00:03:49,000 --> 00:03:51,000
管理員就是 MDA

77
00:03:51,000 --> 00:03:52,000
大陸的管理員這個角色

78
00:03:52,000 --> 00:03:54,000
他是 Dove Code

79
00:03:54,000 --> 00:03:56,000
MUA 就是信箱兼郵筒

80
00:03:56,000 --> 00:03:57,000
他就是 RunCube

81
00:03:57,000 --> 00:03:58,000
就是下面這張圖

82
00:03:58,000 --> 00:04:00,000
你可以看一下右邊這個網頁介面

83
00:04:00,000 --> 00:04:01,000
這就是 RunCube

84
00:04:01,000 --> 00:04:02,000
他就是一個

85
00:04:02,000 --> 00:04:04,000
跟 Gmail 基本上是一樣的東西

86
00:04:04,000 --> 00:04:05,000
就只是長得不一樣

87
00:04:05,000 --> 00:04:07,000
但其實概念上就是一樣的

88
00:04:07,000 --> 00:04:09,000
就是讓你在網頁上面可以看信

89
00:04:09,000 --> 00:04:11,000
這邊就是你收到的信

90
00:04:11,000 --> 00:04:13,000
然後你可以從

91
00:04:13,000 --> 00:04:15,000
一樣你可以從在這邊

92
00:04:15,000 --> 00:04:17,000
這邊可以按下去之後就可以寄信

93
00:04:17,000 --> 00:04:19,000
跟 Gmail 其實就是一樣的東西

94
00:04:19,000 --> 00:04:20,000
就只是

95
00:04:20,000 --> 00:04:21,000
因為你是自建伺服器

96
00:04:21,000 --> 00:04:24,000
所以你沒有辦法用 Gmail 的 Web Client

97
00:04:25,000 --> 00:04:27,000
然後我在這邊

98
00:04:27,000 --> 00:04:29,000
Dove Code 這邊我特別把它出題起來了

99
00:04:29,000 --> 00:04:32,000
因為我們今天講的重點就是 Dove Code

100
00:04:32,000 --> 00:04:35,000
我們可以再回到上頁

101
00:04:35,000 --> 00:04:37,000
我們今天要講的 Thief 系統

102
00:04:37,000 --> 00:04:39,000
是在這一條線

103
00:04:39,000 --> 00:04:41,000
我們的 MTA 就是郵差

104
00:04:41,000 --> 00:04:43,000
在送給管理員的時候

105
00:04:43,000 --> 00:04:44,000
會被 Thief 攔截下來

106
00:04:44,000 --> 00:04:45,000
所以你可以

107
00:04:45,000 --> 00:04:46,000
如果你真的想要想一個比喻的話

108
00:04:46,000 --> 00:04:47,000
你可以把 Thief 想成

109
00:04:47,000 --> 00:04:50,000
可能是管理員的助理之類的

110
00:04:50,000 --> 00:04:51,000
那你就不要管說

111
00:04:51,000 --> 00:04:53,000
為什麼管理員的助理

112
00:04:53,000 --> 00:04:57,000
可以把信拿起來看之類的

113
00:04:57,000 --> 00:04:58,000
這種問題就

114
00:04:58,000 --> 00:04:59,000
這是一個比喻

115
00:04:59,000 --> 00:05:00,000
所以就不用太過認真

116
00:05:00,000 --> 00:05:02,000
但如果你真的想要

117
00:05:02,000 --> 00:05:03,000
去做一個比喻的話

118
00:05:03,000 --> 00:05:05,000
那你可以把它想像成在

119
00:05:05,000 --> 00:05:07,000
郵差可能會先把信給管理員的助理

120
00:05:07,000 --> 00:05:09,000
那助理可能確定一下

121
00:05:09,000 --> 00:05:10,000
這個信沒有問題之後

122
00:05:10,000 --> 00:05:11,000
再給管理員

123
00:05:11,000 --> 00:05:21,000
那管理員再給信箱這樣子

124
00:05:21,000 --> 00:05:22,000
那我們了解了

125
00:05:22,000 --> 00:05:23,000
基本的郵件系統

126
00:05:23,000 --> 00:05:24,000
就剛剛講的東西之後

127
00:05:24,000 --> 00:05:27,000
我們可以來看一下 Thief 本身

128
00:05:27,000 --> 00:05:28,000
Thief 它基本上

129
00:05:28,000 --> 00:05:30,000
在 RFC 上面說的

130
00:05:30,000 --> 00:05:31,000
它是一個讓使用者

131
00:05:31,000 --> 00:05:33,000
自己定義郵件篩選器的語言

132
00:05:33,000 --> 00:05:35,000
所以 Thief 它是一個語言

133
00:05:35,000 --> 00:05:36,000
就像 C++

134
00:05:36,000 --> 00:05:38,000
像 Python 是一個語言

135
00:05:38,000 --> 00:05:40,000
所以我們會有對應的軟體來使用它

136
00:05:40,000 --> 00:05:41,000
例如像是說

137
00:05:41,000 --> 00:05:43,000
Python 可能是直譯器

138
00:05:43,000 --> 00:05:45,000
C++ 是編譯器之類的

139
00:05:45,000 --> 00:05:46,000
那 Thief 它本身

140
00:05:46,000 --> 00:05:51,000
也需要一個編譯器來使用這樣子

141
00:05:51,000 --> 00:05:52,000
那因為我們剛剛說

142
00:05:52,000 --> 00:05:54,000
就是我們的 MDA

143
00:05:54,000 --> 00:05:55,000
使用的是 Dolphcode

144
00:05:55,000 --> 00:05:57,000
那我們的這個 Thief 的這個系統

145
00:05:57,000 --> 00:05:59,000
它是依附在 Dolphcode 上面的

146
00:05:59,000 --> 00:06:02,000
所以我們會用到 Dolphcode 的 Pigeonhole

147
00:06:02,000 --> 00:06:03,000
就是鴿子洞這套軟體

148
00:06:03,000 --> 00:06:04,000
就下面這個圖

149
00:06:04,000 --> 00:06:11,000
這個軟體來使用 Thief 語言

150
00:06:11,000 --> 00:06:12,000
好 那我們在講

151
00:06:12,000 --> 00:06:15,000
我們在寫 Thief script 之前

152
00:06:15,000 --> 00:06:16,000
我們要先講一下

153
00:06:16,000 --> 00:06:18,000
我們檔案要放在哪邊

154
00:06:18,000 --> 00:06:20,000
如果對 Linux 有基本概念的話

155
00:06:20,000 --> 00:06:21,000
應該會知道說

156
00:06:21,000 --> 00:06:24,000
就是這個波浪號是加目錄的意思

157
00:06:24,000 --> 00:06:26,000
那所以我們的 Thief script

158
00:06:26,000 --> 00:06:29,000
會被放在加目錄 Thief 這個資料夾裡面

159
00:06:29,000 --> 00:06:30,000
那正在使用的檔案

160
00:06:30,000 --> 00:06:32,000
這是一個檔案

161
00:06:32,000 --> 00:06:34,000
.doublecode.thief

162
00:06:34,000 --> 00:06:35,000
這是一個檔案

163
00:06:35,000 --> 00:06:36,000
它會放在這個裡面

164
00:06:36,000 --> 00:06:37,000
所以你會把你的 Thief script

165
00:06:37,000 --> 00:06:39,000
寫在這個檔案裡面

166
00:06:39,000 --> 00:06:41,000
Thief 它就會去

167
00:06:41,000 --> 00:06:43,000
把這個檔案抓起來跑

168
00:06:43,000 --> 00:06:48,000
這樣子 這種感覺

169
00:06:48,000 --> 00:06:50,000
好 那接下來我們要看一下

170
00:06:50,000 --> 00:06:52,000
我們這個歌詞棟這個軟體

171
00:06:52,000 --> 00:06:54,000
它的運作流程

172
00:06:54,000 --> 00:06:56,000
我們看到最左邊是

173
00:06:56,000 --> 00:06:57,000
信件進來

174
00:06:57,000 --> 00:07:00,000
最右邊是把信轉寄出去

175
00:07:00,000 --> 00:07:03,000
或者是可能要把它丟進收件夾

176
00:07:03,000 --> 00:07:05,000
或者是做其他事情

177
00:07:05,000 --> 00:07:07,000
或者可能是退信之類的

178
00:07:07,000 --> 00:07:09,000
中間就是我們的 Page & Hold

179
00:07:09,000 --> 00:07:11,000
就是這套 Thief 的軟體

180
00:07:11,000 --> 00:07:14,000
它會幫我們對於這封進來的信

181
00:07:14,000 --> 00:07:15,000
做一個決定

182
00:07:15,000 --> 00:07:16,000
這封信到底該何去何從

183
00:07:16,000 --> 00:07:18,000
然後給出一個結果

184
00:07:18,000 --> 00:07:21,000
然後做這件事情

185
00:07:21,000 --> 00:07:24,000
中間這個裡面分成了三個部分

186
00:07:24,000 --> 00:07:26,000
Thief 它有三種 script

187
00:07:26,000 --> 00:07:27,000
第一種是 before

188
00:07:27,000 --> 00:07:28,000
第二種是 user

189
00:07:28,000 --> 00:07:30,000
第三種是 after

190
00:07:30,000 --> 00:07:32,000
基本上看名字應該就可以理解

191
00:07:32,000 --> 00:07:34,000
就是 before 就是在執行之前的

192
00:07:34,000 --> 00:07:36,000
after 就是在執行之後的

193
00:07:36,000 --> 00:07:38,000
那中間的 user 就是自己定義的

194
00:07:38,000 --> 00:07:42,000
或者是系統管理員也可以寫一個預設的

195
00:07:42,000 --> 00:07:48,000
給沒有自己寫 Thief script 的使用者來用

196
00:07:48,000 --> 00:07:49,000
然後呢

197
00:07:49,000 --> 00:07:52,000
Thief 它並不是一個直譯式語言

198
00:07:52,000 --> 00:07:57,000
所以在前面它需要先做編譯的動作

199
00:07:57,000 --> 00:07:59,000
接下來我要講一下

200
00:07:59,000 --> 00:08:02,000
這個 user 自定義的語言它是怎麼運作的

201
00:08:02,000 --> 00:08:04,000
因為它是 user 自定義的語言

202
00:08:04,000 --> 00:08:07,000
所以它並不歸系統來管

203
00:08:07,000 --> 00:08:08,000
它並不歸系統管理員來管

204
00:08:08,000 --> 00:08:12,000
所以如果這個 script 它編譯錯誤

205
00:08:12,000 --> 00:08:17,000
或者是它可能用了一些不該用的東西

206
00:08:17,000 --> 00:08:19,000
那這個 script 它會把這個錯誤

207
00:08:19,000 --> 00:08:21,000
記錄到使用者的加目錄裡面

208
00:08:21,000 --> 00:08:23,000
所以你去看系統的 log

209
00:08:23,000 --> 00:08:25,000
其實你不會看到它到底是發生什麼問題

210
00:08:25,000 --> 00:08:27,000
你就只會看到說

211
00:08:27,000 --> 00:08:30,000
某個使用者的 sieve 掛了

212
00:08:30,000 --> 00:08:32,000
但是你不知道是為什麼

213
00:08:32,000 --> 00:08:35,000
你必須要去看它加目錄給的記錄檔

214
00:08:35,000 --> 00:08:37,000
你才會知道是發生什麼事情

215
00:08:37,000 --> 00:08:41,000
然後在最後一件事情是

216
00:08:41,000 --> 00:08:44,000
我剛剛在講這三個 script 的時候

217
00:08:44,000 --> 00:08:45,000
我說的是種

218
00:08:45,000 --> 00:08:48,000
所以事實上 before 跟 after

219
00:08:48,000 --> 00:08:50,000
它是一種 script

220
00:08:50,000 --> 00:08:51,000
它其實可以有好幾個

221
00:08:51,000 --> 00:08:53,000
你可以寫 before1 before2

222
00:08:53,000 --> 00:08:55,000
就是 after1 2 3 之類的

223
00:08:55,000 --> 00:08:56,000
你可以寫好幾個

224
00:08:56,000 --> 00:09:00,000
你可以把你的 sieve script 的檔案做細分

225
00:09:06,000 --> 00:09:08,000
接下來我們可以來看一下

226
00:09:08,000 --> 00:09:10,000
我們要怎麼寫 sieve script

227
00:09:10,000 --> 00:09:12,000
sieve script 它有很多內建的 extensions 可以使用

228
00:09:12,000 --> 00:09:14,000
你可以把這個 extensions 就想成是一個模組

229
00:09:14,000 --> 00:09:16,000
它就是一個可以讓你來用的模組

230
00:09:16,000 --> 00:09:18,000
例如像是說 file into

231
00:09:18,000 --> 00:09:21,000
file into 可以把信丟到某個資料夾裡面去

232
00:09:21,000 --> 00:09:24,000
就是有點像是把這封信移到某個資料夾的這種感覺

233
00:09:24,000 --> 00:09:26,000
reject 就是拒絕

234
00:09:26,000 --> 00:09:29,000
就是把這封信退回它原來的地方

235
00:09:29,000 --> 00:09:31,000
等下說我就是不收這封信

236
00:09:31,000 --> 00:09:33,000
就丟回去寄件者那邊

237
00:09:33,000 --> 00:09:35,000
vacation 是假期性

238
00:09:35,000 --> 00:09:37,000
就是如果你現在可能在度假

239
00:09:37,000 --> 00:09:39,000
你可能會希望你的電子郵件

240
00:09:39,000 --> 00:09:43,000
就是可以有一個自動回覆說我在修假期

241
00:09:43,000 --> 00:09:45,000
可能三天之後再找我之類的

242
00:09:45,000 --> 00:09:47,000
就可以用 vacation

243
00:09:47,000 --> 00:09:50,000
所以它其實就是自動回覆的一個系統

244
00:09:51,000 --> 00:09:52,000
body 這個 extension

245
00:09:52,000 --> 00:09:55,000
它可以看信件內文的東西

246
00:09:55,000 --> 00:09:59,000
但是 body 這個東西可能就會稍微比較具有爭議性

247
00:09:59,000 --> 00:10:01,000
因為可能會覺得說管理員

248
00:10:01,000 --> 00:10:05,000
不應該去看使用者的信件內容是什麼東西

249
00:10:07,000 --> 00:10:08,000
那如果你是管理員

250
00:10:08,000 --> 00:10:10,000
你可能真的自己建了一個伺服器

251
00:10:10,000 --> 00:10:11,000
然後你是管理員

252
00:10:11,000 --> 00:10:13,000
然後你覺得有些 extension

253
00:10:13,000 --> 00:10:14,000
會有一些安全性的問題

254
00:10:14,000 --> 00:10:16,000
你可以在設定檔裡面把它關掉

255
00:10:16,000 --> 00:10:20,000
你可以用加號減號來把某個關掉

256
00:10:20,000 --> 00:10:24,000
也可以把一些實驗性的 extension 來打開

257
00:10:27,000 --> 00:10:31,000
我們剛剛講了很多原理跟流程相關的事情

258
00:10:31,000 --> 00:10:34,000
那我們來看一下我們到底應該要怎麼寫出來

259
00:10:34,000 --> 00:10:36,000
這是一個 GUI 的東西

260
00:10:36,000 --> 00:10:38,000
但大家應該都蠻快樂

261
00:10:38,000 --> 00:10:39,000
就看到 GUI 覺得很快樂

262
00:10:39,000 --> 00:10:42,000
就是可以戳戳戳然後就寫出一個東西來

263
00:10:42,000 --> 00:10:43,000
這很棒

264
00:10:43,000 --> 00:10:46,000
在這背後其實是有蠻複雜的東西在跑的

265
00:10:46,000 --> 00:10:49,000
第一個東西是 managed sieve

266
00:10:49,000 --> 00:10:52,000
managed sieve 它是一個 TCP 的 interface

267
00:10:52,000 --> 00:10:55,000
你可以用 TCP socket 的方式

268
00:10:55,000 --> 00:11:00,000
來把你的 script 透過 TCP 協定送給伺服器

269
00:11:00,000 --> 00:11:04,000
然後讓伺服器遠端寫入的概念

270
00:11:04,000 --> 00:11:08,000
但是這個 managed sieve 它並沒有好用到哪裡去

271
00:11:08,000 --> 00:11:13,000
因為第一個你還是得要寫 sieve script 這個程式語言

272
00:11:13,000 --> 00:11:16,000
第二個是因為我自己有實際用過這個東西

273
00:11:16,000 --> 00:11:19,000
它會問你說你的這個 script 有多長

274
00:11:19,000 --> 00:11:20,000
這件事情很可怕

275
00:11:20,000 --> 00:11:22,000
就是它會問你說有幾個字元

276
00:11:22,000 --> 00:11:25,000
所以你可能寫完之後你還要先算你有幾個字元

277
00:11:25,000 --> 00:11:27,000
你要是漏算了你可能就寫不進去了

278
00:11:27,000 --> 00:11:30,000
所以你會很慘就超級麻煩的

279
00:11:30,000 --> 00:11:32,000
那為什麼還要講這個

280
00:11:32,000 --> 00:11:34,000
因為我們加上 ground cube plugin 的時候

281
00:11:34,000 --> 00:11:36,000
它就會變得非常好用

282
00:11:36,000 --> 00:11:38,000
ground cube 就是我們前面講的

283
00:11:38,000 --> 00:11:40,000
就是這個 webmail 的樣子

284
00:11:40,000 --> 00:11:43,000
那它有一個插件

285
00:11:43,000 --> 00:11:45,000
就是關於 sieve 的

286
00:11:45,000 --> 00:11:48,000
那也就是說其實它就是可以讓你用 GUI 的方式

287
00:11:48,000 --> 00:11:50,000
然後把你想要的 script

288
00:11:50,000 --> 00:11:53,000
用 GUI 的方式戳戳戳把它戳出來

289
00:11:53,000 --> 00:11:55,000
然後在遠端寫入

290
00:11:55,000 --> 00:11:56,000
但是因為這是程式嘛

291
00:11:56,000 --> 00:11:59,000
因為 ground cube plugin 它本身是一個 PHP 的程式

292
00:11:59,000 --> 00:12:02,000
所以它當然沒有任何問題可以知道說

293
00:12:02,000 --> 00:12:04,000
你的這個 script 到底有多長

294
00:12:04,000 --> 00:12:07,000
所以它就不會有那種數不清楚的問題

295
00:12:07,000 --> 00:12:09,000
所以當你用 managed sieve

296
00:12:09,000 --> 00:12:11,000
再加上 ground cube plugin 的時候

297
00:12:11,000 --> 00:12:13,000
你就可以遠端的用 GUI

298
00:12:13,000 --> 00:12:15,000
然後寫入這個東西

299
00:12:15,000 --> 00:12:17,000
寫入你的 script

300
00:12:22,000 --> 00:12:24,000
好 那我們已經講完

301
00:12:24,000 --> 00:12:26,000
我們大概應該要怎麼設定

302
00:12:26,000 --> 00:12:27,000
或者是一些流程的東西

303
00:12:27,000 --> 00:12:30,000
我們來看一些範例這樣子

304
00:12:30,000 --> 00:12:32,000
第一個範例是剛剛前面有提到的

305
00:12:32,000 --> 00:12:34,000
就是假期的自動回覆

306
00:12:34,000 --> 00:12:36,000
像這個東西它就是說

307
00:12:36,000 --> 00:12:38,000
if true 基本上就是說

308
00:12:38,000 --> 00:12:41,000
if true 是一個一定會成立的狀態

309
00:12:41,000 --> 00:12:43,000
所以就是對於每封信

310
00:12:43,000 --> 00:12:46,000
我都每天回一次

311
00:12:46,000 --> 00:12:48,000
然後標題是 vacation 喵

312
00:12:48,000 --> 00:12:49,000
然後內文是喵喵

313
00:12:49,000 --> 00:12:54,000
所以假設你現在使用這一套 sieve script

314
00:12:54,000 --> 00:12:56,000
那別人寄信給你的時候

315
00:12:56,000 --> 00:12:59,000
他就會收到這封自動回覆信

316
00:12:59,000 --> 00:13:01,000
然後說你在度假的意思

317
00:13:01,000 --> 00:13:08,000
好 那前面講了這麼多

318
00:13:08,000 --> 00:13:10,000
基本上我們這個議程的主題是分類

319
00:13:10,000 --> 00:13:13,000
所以我們剛剛的 vacation 就只是

320
00:13:13,000 --> 00:13:14,000
因為前面有提到這個 extension

321
00:13:14,000 --> 00:13:15,000
所以我稍微講一下

322
00:13:15,000 --> 00:13:17,000
但我們重點還是分類

323
00:13:17,000 --> 00:13:20,000
像是我自己有一個伺服器在宿舍

324
00:13:20,000 --> 00:13:25,000
所以我們平常就會收到一些伺服器的 log 信件

325
00:13:25,000 --> 00:13:26,000
例如像是說 routemail

326
00:13:26,000 --> 00:13:29,000
可能那種有一些緊急情況的

327
00:13:29,000 --> 00:13:31,000
可能伺服器快要死掉的狀況

328
00:13:31,000 --> 00:13:34,000
可能伺服器會寄信給 root

329
00:13:34,000 --> 00:13:36,000
然後說有什麼事情發生了

330
00:13:36,000 --> 00:13:39,000
通常我們會把這個 root 信轉寄到自己這邊來

331
00:13:39,000 --> 00:13:47,000
所以我們可以用標頭檔裡面的收件者

332
00:13:47,000 --> 00:13:50,000
然後用正規判斷

333
00:13:50,000 --> 00:13:52,000
用正規表達式來判斷說

334
00:13:52,000 --> 00:13:54,000
它是不是符合 root 點信號

335
00:13:54,000 --> 00:13:56,000
也就是 root 然後後面是任何東西

336
00:13:56,000 --> 00:13:59,000
可能是 root at localhost 之類的東西

337
00:13:59,000 --> 00:14:00,000
只要是遇到這種信

338
00:14:00,000 --> 00:14:02,000
就全部丟進 log 這個資料夾裡面

339
00:14:02,000 --> 00:14:09,000
這個你看到後面這一串東西

340
00:14:09,000 --> 00:14:11,000
應該會覺得很眼熟

341
00:14:11,000 --> 00:14:14,000
這其實就是剛剛這個 GUI 的東西

342
00:14:14,000 --> 00:14:16,000
就是這一坨東西

343
00:14:16,000 --> 00:14:18,000
所以你可以用 GUI 寫

344
00:14:18,000 --> 00:14:20,000
你也可以直接用手打

345
00:14:20,000 --> 00:14:22,000
就是看你自己喜不喜歡

346
00:14:22,000 --> 00:14:24,000
那基本上意思就是一樣的

347
00:14:24,000 --> 00:14:28,000
我去看主旨是不是包含這四種東西

348
00:14:28,000 --> 00:14:29,000
那如果包含的話

349
00:14:29,000 --> 00:14:31,000
它其實就是 run output

350
00:14:31,000 --> 00:14:34,000
就是機器會固定產出的一個 log 檔

351
00:14:34,000 --> 00:14:36,000
那你就是把它丟進 log 裡面

352
00:14:36,000 --> 00:14:42,000
那你可能有空再去看這樣子

353
00:14:42,000 --> 00:14:44,000
或者是說可能要日常一點

354
00:14:44,000 --> 00:14:46,000
像是我是交大的學生

355
00:14:46,000 --> 00:14:49,000
那我們平常用的教學系統是一三平台

356
00:14:49,000 --> 00:14:51,000
那它寄出來的信

357
00:14:51,000 --> 00:14:53,000
不管是哪個老師寄或哪個助教寄的

358
00:14:53,000 --> 00:15:00,000
它的 front 全部都會是 13 at nycu.edu.tw

359
00:15:00,000 --> 00:15:03,000
所以我只要看到這個 front

360
00:15:03,000 --> 00:15:06,000
我就可以把這封信直接丟進 13 這個資料夾

361
00:15:06,000 --> 00:15:08,000
所以像剛剛開場白的時候講的

362
00:15:08,000 --> 00:15:12,000
你可能發現說你太晚收到信了或什麼東西的

363
00:15:12,000 --> 00:15:14,000
那你只要看到你的 13

364
00:15:14,000 --> 00:15:16,000
我啦 我只要看到我的 13 資料夾

365
00:15:16,000 --> 00:15:18,000
突然跳出一封信或跳出兩封信

366
00:15:18,000 --> 00:15:20,000
我就會知道說

367
00:15:20,000 --> 00:15:22,000
天啊 那我可能又要寫作業了

368
00:15:22,000 --> 00:15:24,000
或是我可能期中考又要來了

369
00:15:24,000 --> 00:15:26,000
那我就不會漏掉說

370
00:15:26,000 --> 00:15:29,000
這種很重要的作業的此線的這種信

371
00:15:35,000 --> 00:15:38,000
另外一個這個範例是稍微比較進階一點的

372
00:15:38,000 --> 00:15:40,000
它是會用到這個夾號

373
00:15:40,000 --> 00:15:44,000
這個夾號在伺服器裡面會被忽略掉

374
00:15:44,000 --> 00:15:46,000
更精確一點來說

375
00:15:46,000 --> 00:15:49,000
應該說它夾號後面的東西會被忽略掉

376
00:15:49,000 --> 00:15:53,000
比如說我用密加 web 密加 test 密加 mail

377
00:15:53,000 --> 00:15:55,000
這些全部都會被寄到密來

378
00:15:55,000 --> 00:15:57,000
所以如果我在我的 web server 裡面

379
00:15:57,000 --> 00:16:01,000
就放了密加 web 這個郵件

380
00:16:01,000 --> 00:16:04,000
在整個裡面的 log 信都是放這個郵件

381
00:16:04,000 --> 00:16:08,000
那我只要知道它這封信是寄給這個地址

382
00:16:08,000 --> 00:16:10,000
那它一定就是從 web server 來的

383
00:16:10,000 --> 00:16:13,000
那所以我就可以直接再把我的 log

384
00:16:13,000 --> 00:16:15,000
再做更進一步的細分

385
00:16:19,000 --> 00:16:22,000
然後最後是一點點的

386
00:16:22,000 --> 00:16:25,000
如果可能真的有人看完這個東西覺得深受感動

387
00:16:25,000 --> 00:16:27,000
想要使用的話

388
00:16:27,000 --> 00:16:30,000
就是這裡有一些有趣的小問題

389
00:16:30,000 --> 00:16:32,000
例如像是說這種很常見的

390
00:16:32,000 --> 00:16:37,000
就是想要用點點來跑到上一層目錄的這種 travel 守的手法

391
00:16:37,000 --> 00:16:40,000
那基本上會直接被 pigeonhole 擋掉

392
00:16:40,000 --> 00:16:43,000
因為它會直接跟你說這是不合法的

393
00:16:43,000 --> 00:16:48,000
你會直接被擋掉

394
00:16:48,000 --> 00:16:50,000
那如果我現在收到一封信

395
00:16:50,000 --> 00:16:51,000
然後我把它

396
00:16:51,000 --> 00:16:54,000
把這封信丟到我的另外一個電子郵件

397
00:16:54,000 --> 00:16:57,000
那我在我的另外一個電子郵件又設定說再寄回來

398
00:16:57,000 --> 00:16:59,000
所以就會變成一個循環

399
00:16:59,000 --> 00:17:01,000
那如果遇到這種循環的話

400
00:17:01,000 --> 00:17:02,000
它會不會炸掉呢

401
00:17:02,000 --> 00:17:04,000
不會 事實上是不會

402
00:17:04,000 --> 00:17:05,000
它有一個

403
00:17:05,000 --> 00:17:07,000
它加目錄裡面會有一個這個檔案

404
00:17:07,000 --> 00:17:08,000
它會把這個 loop 擋下來

405
00:17:08,000 --> 00:17:11,000
它會去看這封郵件裡面的 message ID

406
00:17:11,000 --> 00:17:12,000
是不是重複的

407
00:17:12,000 --> 00:17:14,000
如果它發現重複的話

408
00:17:14,000 --> 00:17:16,000
那它就會把這封信擋掉

409
00:17:16,000 --> 00:17:18,000
就不會讓它再進來了

410
00:17:18,000 --> 00:17:20,000
那事實上剛剛講的那種

411
00:17:20,000 --> 00:17:21,000
vacation 的

412
00:17:21,000 --> 00:17:22,000
vacation 我剛剛說

413
00:17:22,000 --> 00:17:23,000
那個有個冒號

414
00:17:23,000 --> 00:17:24,000
days 1

415
00:17:24,000 --> 00:17:26,000
它其實是一天寄一封的意思

416
00:17:26,000 --> 00:17:27,000
所以

417
00:17:27,000 --> 00:17:28,000
它這種不重複寄信

418
00:17:28,000 --> 00:17:30,000
它也是用這個檔案來控制

419
00:17:30,000 --> 00:17:31,000
它的過一天與否

420
00:17:31,000 --> 00:17:37,000
也是用這個檔案來控制

421
00:17:37,000 --> 00:17:40,000
也許有些人有聽過 procmail 這個軟體

422
00:17:40,000 --> 00:17:41,000
它是一個有點老

423
00:17:41,000 --> 00:17:43,000
但它也是類似功能的軟體

424
00:17:43,000 --> 00:17:45,000
就是做郵件過濾

425
00:17:45,000 --> 00:17:47,000
那 sif 有沒有什麼比較好的地方

426
00:17:47,000 --> 00:17:49,000
事實上是有

427
00:17:49,000 --> 00:17:50,000
基本上 procmail 可以用

428
00:17:50,000 --> 00:17:51,000
可以執行外部指令

429
00:17:51,000 --> 00:17:52,000
就是說

430
00:17:52,000 --> 00:17:53,000
它可以執行一些 share 的指令

431
00:17:53,000 --> 00:17:55,000
所以如果你有些 share 的指令

432
00:17:55,000 --> 00:17:57,000
沒有設定的很好的話

433
00:17:57,000 --> 00:17:58,000
你就會被打穿

434
00:17:58,000 --> 00:18:01,000
因為它就可以從 sif script 裡面

435
00:18:01,000 --> 00:18:02,000
執行 share 的指令

436
00:18:02,000 --> 00:18:03,000
那這是很可怕的事情

437
00:18:03,000 --> 00:18:05,000
但 sif 它不會有這個問題

438
00:18:05,000 --> 00:18:07,000
因為它已經明確的規定說

439
00:18:07,000 --> 00:18:09,000
它不允許執行外部指令

440
00:18:09,000 --> 00:18:11,000
所以你只能用既有的

441
00:18:11,000 --> 00:18:12,000
剛剛講的那些 extension

442
00:18:12,000 --> 00:18:14,000
filing to reject 這類的東西而已

443
00:18:17,000 --> 00:18:20,000
OK 那最後是 Q&A 的環節

444
00:18:20,000 --> 00:18:21,000
有什麼問題嗎

445
00:18:21,000 --> 00:18:22,000
好像有耶

446
00:18:24,000 --> 00:18:26,000
好 那等我一下下喔

447
00:18:29,000 --> 00:18:30,000
在哪邊呢

448
00:18:43,000 --> 00:18:46,000
有人問我說我的 Mail server 是架在哪裡

449
00:18:46,000 --> 00:18:48,000
我的 Mail server 是架在我的宿舍

450
00:18:48,000 --> 00:18:49,000
就是一台電腦

451
00:18:49,000 --> 00:18:52,000
因為伺服器跟電腦其實本身沒有非常大的差別

452
00:18:52,000 --> 00:18:54,000
就只是效能好不好而已

453
00:18:54,000 --> 00:18:56,000
它基本上就是一台一般的桌機

454
00:18:56,000 --> 00:18:57,000
我只是把它變成

455
00:18:57,000 --> 00:18:58,000
把它灌了 PV

456
00:18:58,000 --> 00:19:01,000
然後多插幾條 RAM

457
00:19:01,000 --> 00:19:02,000
然後它就變成一台伺服器了

458
00:19:02,000 --> 00:19:05,000
所以我伺服器就是放在我宿舍裡面

459
00:19:05,000 --> 00:19:07,000
因為交大的宿舍有 Public IP

460
00:19:07,000 --> 00:19:08,000
所以很好用

461
00:19:09,000 --> 00:19:10,000
那當然就沒有收費

462
00:19:10,000 --> 00:19:13,000
就一次性買了機器就可以了

463
00:19:13,000 --> 00:19:15,000
IP 黑名單怎麼解決的

464
00:19:15,000 --> 00:19:16,000
其實我沒有解決

465
00:19:16,000 --> 00:19:18,000
因為我伺服器也剛架不久

466
00:19:18,000 --> 00:19:20,000
然後平常蠻忙的

467
00:19:20,000 --> 00:19:21,000
所以其實我一直沒有時間去

468
00:19:21,000 --> 00:19:23,000
好好的把這件事情解決掉

469
00:19:23,000 --> 00:19:25,000
因為我平常還有一些奇怪的東西要講

470
00:19:25,000 --> 00:19:27,000
所以我目前還沒有時間去處理

471
00:19:27,000 --> 00:19:28,000
這種什麼寄件黑名單

472
00:19:28,000 --> 00:19:30,000
這種東西我還沒有辦法解決

473
00:19:33,000 --> 00:19:35,000
在場還有任何人想

474
00:19:35,000 --> 00:19:38,000
有問題想問講者的嗎

475
00:19:39,000 --> 00:19:41,000
那沒有的話時間也差不多了

476
00:19:41,000 --> 00:19:45,000
那我們就謝謝講者今天帶來的議程

477
00:19:47,000 --> 00:19:49,000
謝謝大家


